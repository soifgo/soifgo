<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Geo Calculatur</title>
</head>
<body style="font-family: sans-serif; padding: 20px;">
  <h2>Geometry Visualizer & Calculator</h2>

  <label for="shape">Select Shape:</label>
  <select id="shape" onchange="renderForm(); drawShape();" style="margin: 10px;">
    <option value="">-- Choose --</option>
    <option value="circle">Circle</option>
    <option value="square">Square</option>
    <option value="rectangle">Rectangle</option>
    <option value="sphere">Sphere</option>
    <option value="cube">Cube</option>
    <option value="cylinder">Cylinder</option>
    <option value="cone">Cone</option>
    <option value="triangle">Triangle</option>
  </select>

  <div id="inputs" style="margin-top: 15px;"></div>
  <button onclick="calculate(); drawShape();" style="margin-top: 10px;">Calculate</button>
  <p id="result" style="margin-top: 15px; font-weight: bold;">Result:</p>
  <canvas id="canvas" width="400" height="300" style="border:1px solid #333; margin-top: 20px;"></canvas>

  <script>
    function renderForm() {
      const shape = document.getElementById("shape").value;
      const inputs = document.getElementById("inputs");
      inputs.innerHTML = "";

      if (shape === "circle" || shape === "sphere") {
        inputs.innerHTML = 'Radius: <input id="r">';
      } else if (shape === "square" || shape === "cube") {
        inputs.innerHTML = 'Side Length: <input id="a">';
      } else if (shape === "rectangle") {
        inputs.innerHTML = 'Length: <input id="l"><br>Width: <input id="w">';
      } else if (shape === "cylinder" || shape === "cone") {
        inputs.innerHTML = 'Radius: <input id="r"><br>Height: <input id="h">';
      } else if (shape === "triangle") {
        inputs.innerHTML = 'Side a: <input id="a"><br>Side b: <input id="b"><br>Side c: <input id="c">';
      }
    }

    function calculate() {
      const shape = document.getElementById("shape").value;
      let result = "Result: ";

      let r = parseFloat(document.getElementById("r")?.value);
      let a = parseFloat(document.getElementById("a")?.value);
      let b = parseFloat(document.getElementById("b")?.value);
      let c = parseFloat(document.getElementById("c")?.value);
      let l = parseFloat(document.getElementById("l")?.value);
      let w = parseFloat(document.getElementById("w")?.value);
      let h = parseFloat(document.getElementById("h")?.value);

      if (shape === "circle") {
        result += `Area = ${(Math.PI * r ** 2).toFixed(2)} | Perimeter = ${(2 * Math.PI * r).toFixed(2)}`;
      } else if (shape === "square") {
        result += `Area = ${(a ** 2)} | Perimeter = ${(4 * a)}`;
      } else if (shape === "rectangle") {
        result += `Area = ${(l * w)} | Perimeter = ${(2 * (l + w))}`;
      } else if (shape === "sphere") {
        result += `Volume = ${((4 / 3) * Math.PI * r ** 3).toFixed(2)} | Surface = ${(4 * Math.PI * r ** 2).toFixed(2)}`;
      } else if (shape === "cube") {
        result += `Volume = ${(a ** 3)} | Surface = ${(6 * a ** 2)}`;
      } else if (shape === "cylinder") {
        result += `Volume = ${(Math.PI * r ** 2 * h).toFixed(2)} | Surface = ${(2 * Math.PI * r * h + 2 * Math.PI * r ** 2).toFixed(2)}`;
      } else if (shape === "cone") {
        result += `Volume = ${((1 / 3) * Math.PI * r ** 2 * h).toFixed(2)}`;
      } else if (shape === "triangle") {
        if (a + b > c && a + c > b && b + c > a) {
          let s = (a + b + c) / 2;
          let area = Math.sqrt(s * (s - a) * (s - b) * (s - c));
          result += `Valid âœ“ | Perimeter = ${(a + b + c).toFixed(2)} | Area = ${area.toFixed(2)}`;
        } else {
          result += `Invalid âœ—: sides do not form a triangle`;
        }
      }

      document.getElementById("result").innerText = result;
    }

   function drawShape() {
  const shape = document.getElementById("shape").value;
  const c = document.getElementById("canvas");
  const ctx = c.getContext("2d");
  ctx.clearRect(0, 0, c.width, c.height);
  ctx.lineWidth = 2;
  ctx.font = "13px Arial";

  const arrow = (x1, y1, x2, y2, label, color) => {
    ctx.strokeStyle = color;
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    const angle = Math.atan2(y2 - y1, x2 - x1);
    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - 6 * Math.cos(angle - 0.3), y2 - 6 * Math.sin(angle - 0.3));
    ctx.lineTo(x2 - 6 * Math.cos(angle + 0.3), y2 - 6 * Math.sin(angle + 0.3));
    ctx.closePath();
    ctx.fill();
    ctx.fillText(label, (x1 + x2) / 2 + 6, (y1 + y2) / 2 - 6);
  };

  // ðŸŸ¦ Circle
  if (shape === "circle") {
    ctx.beginPath();
    ctx.arc(200, 150, 60, 0, Math.PI * 2);
    ctx.stroke();
    arrow(200, 150, 260, 150, "radius", "blue");
  }

  // ðŸŸ¥ Square
  else if (shape === "square") {
    ctx.strokeRect(150, 100, 100, 100);
    arrow(150, 95, 250, 95, "side", "purple");
  }

  // ðŸŸ© Rectangle
  else if (shape === "rectangle") {
    ctx.strokeRect(120, 110, 140, 60);
    arrow(120, 105, 260, 105, "length", "green");
    arrow(115, 110, 115, 170, "width", "red");
  }

  // âšª Sphere
  else if (shape === "sphere") {
    ctx.beginPath();
    ctx.arc(200, 150, 60, 0, Math.PI * 2);
    ctx.stroke();
    ctx.beginPath();
    ctx.ellipse(200, 150, 60, 20, 0, 0, Math.PI * 2);
    ctx.stroke();
    arrow(200, 150, 260, 150, "radius", "blue");
  }

  // ðŸ§Š Cube
  else if (shape === "cube") {
    ctx.strokeRect(140, 100, 60, 60);
    ctx.strokeRect(160, 80, 60, 60);
    ctx.moveTo(140, 100); ctx.lineTo(160, 80);
    ctx.moveTo(200, 100); ctx.lineTo(220, 80);
    ctx.moveTo(140, 160); ctx.lineTo(160, 140);
    ctx.moveTo(200, 160); ctx.lineTo(220, 140);
    ctx.stroke();
    arrow(140, 95, 200, 95, "side", "orange");
  }

  // ðŸ§¯ Cylinder
  else if (shape === "cylinder") {
    ctx.beginPath();
    ctx.ellipse(200, 90, 50, 15, 0, 0, Math.PI * 2);
    ctx.stroke();
    ctx.beginPath();
    ctx.ellipse(200, 180, 50, 15, 0, 0, Math.PI);
    ctx.stroke();
    ctx.moveTo(150, 90); ctx.lineTo(150, 180);
    ctx.moveTo(250, 90); ctx.lineTo(250, 180);
    ctx.stroke();
    arrow(145, 90, 145, 180, "height", "red");
    arrow(200, 90, 250, 90, "radius", "blue");
  }

  // ðŸ”» Cone
  else if (shape === "cone") {
    ctx.beginPath();
    ctx.moveTo(150, 200);
    ctx.lineTo(200, 70);
    ctx.lineTo(250, 200);
    ctx.closePath();
    ctx.stroke();
    ctx.beginPath();
    ctx.ellipse(200, 200, 50, 10, 0, 0, Math.PI, true);
    ctx.stroke();
    arrow(200, 70, 200, 200, "height", "red");
    arrow(200, 200, 250, 200, "radius", "blue");
  }

  // ðŸ”º Triangle (Ø¨Ø§ Ø³Ù‡ Ø¶Ù„Ø¹ Ùˆ Ù…Ù‚ÛŒØ§Ø³ Ù…Ù†Ø§Ø³Ø¨)
  else if (shape === "triangle") {
    let a = parseFloat(document.getElementById("a")?.value);
    let b = parseFloat(document.getElementById("b")?.value);
    let cVal = parseFloat(document.getElementById("c")?.value);
    if (isNaN(a) || isNaN(b) || isNaN(cVal)) return;

    if (a + b > cVal && a + cVal > b && b + cVal > a) {
      const scale = 5;
      const A = { x: 80, y: 220 };
      const B = { x: A.x + a * scale, y: 220 };

      let cosC = (a ** 2 + b ** 2 - cVal ** 2) / (2 * a * b);
      cosC = Math.max(-1, Math.min(1, cosC));
      const angleC = Math.acos(cosC);

      const Cx = A.x + cVal * scale * Math.cos(angleC);
      const Cy = A.y - cVal * scale * Math.sin(angleC);
      const C = { x: Cx, y: Cy };

      ctx.strokeStyle = "#000";
      ctx.beginPath();
      ctx.moveTo(A.x, A.y);
      ctx.lineTo(B.x, B.y);
      ctx.lineTo(C.x, C.y);
      ctx.closePath();
      ctx.stroke();

      arrow(A.x, A.y, B.x, B.y, "a", "blue");
      arrow(B.x, B.y, C.x, C.y, "b", "red");
      arrow(C.x, C.y, A.x, A.y, "c", "green");
    }
  }
    }
  </script>
</body>
</html>
