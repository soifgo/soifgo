<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            color: white;
        }
        .timer, .countdown {
            font-size: 42px;
            margin: 20px;
        }
        button, input {
            padding: 10px;
            font-size: 18px;
            margin: 10px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }
        button {
            background-color: #0072ff;
            color: white;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056cc;
        }
        input[type="checkbox"] {
            transform: scale(1.5);
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>Stopwatch</h1>

    <!-- Stopwatch Section -->
    <div class="timer" id="stopwatch">00:00:00.000</div>
    <button onclick="startStopwatch()">Start Stopwatch</button>
    <button onclick="stopStopwatch()">Stop Stopwatch</button>
    <button onclick="resetStopwatch()">Reset Stopwatch</button>

    <!-- Countdown Timer Section -->
    <div>
        <label for="countdownTime">Enter countdown time (seconds): </label>
        <input type="number" id="countdownTime" min="1" value="10">
    </div>
    <div class="countdown" id="countdown">00:10.000</div>
    <button onclick="startCountdown()">Start Countdown</button>
    <button onclick="stopCountdown()">Stop Countdown</button>
    <button onclick="resetCountdown()">Reset Countdown</button>

    <!-- Beep Toggle -->
    <div>
        <label for="enableBeep">Enable Beep:</label>
        <input type="checkbox" id="enableBeep" checked>
    </div>

    <script>
        let stopwatchInterval;
        let stopwatchMilliseconds = 0;
        let countdownInterval;
        let countdownMilliseconds = 10000; // Default 10 seconds in milliseconds

        // Format Time Function
        function formatTime(ms) {
            const hours = Math.floor(ms / 3600000);
            const minutes = Math.floor((ms % 3600000) / 60000);
            const seconds = Math.floor((ms % 60000) / 1000);
            const milliseconds = ms % 1000;
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(3, '0')}`;
        }

        // Stopwatch Functions
        function startStopwatch() {
            if (!stopwatchInterval) {
                const start = Date.now() - stopwatchMilliseconds;
                stopwatchInterval = setInterval(() => {
                    stopwatchMilliseconds = Date.now() - start;
                    document.getElementById("stopwatch").innerText = formatTime(stopwatchMilliseconds);
                }, 10);
            }
        }

        function stopStopwatch() {
            clearInterval(stopwatchInterval);
            stopwatchInterval = null;
        }

        function resetStopwatch() {
            stopStopwatch();
            stopwatchMilliseconds = 0;
            document.getElementById("stopwatch").innerText = formatTime(stopwatchMilliseconds);
        }

        // Countdown Timer Functions
        function startCountdown() {
            const inputTime = document.getElementById("countdownTime").value;
            if (inputTime) {
                countdownMilliseconds = parseInt(inputTime) * 1000;
                document.getElementById("countdown").innerText = formatTime(countdownMilliseconds);
            }
            if (!countdownInterval && countdownMilliseconds > 0) {
                const end = Date.now() + countdownMilliseconds;
                countdownInterval = setInterval(() => {
                    countdownMilliseconds = Math.max(0, end - Date.now());
                    document.getElementById("countdown").innerText = formatTime(countdownMilliseconds);
                    if (countdownMilliseconds <= 0) {
                        clearInterval(countdownInterval);
                        countdownInterval = null;
                        playBeep();
                    }
                }, 10);
            }
        }

        function stopCountdown() {
            clearInterval(countdownInterval);
            countdownInterval = null;
        }

        function resetCountdown() {
            stopCountdown();
            countdownMilliseconds = parseInt(document.getElementById("countdownTime").value) * 1000 || 10000;
            document.getElementById("countdown").innerText = formatTime(countdownMilliseconds);
        }

        // Beep Sound Function
        function playBeep() {
            const enableBeep = document.getElementById("enableBeep").checked;
            if (enableBeep) {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                oscillator.type = 'square'; // Waveform type for beep
                oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // Frequency in Hz (440 for standard beep)
                oscillator.connect(audioCtx.destination);
                oscillator.start();
                oscillator.stop(audioCtx.currentTime + 0.5); // Play for 0.5 seconds
            }
        }
    </script>
</body>
</html>
